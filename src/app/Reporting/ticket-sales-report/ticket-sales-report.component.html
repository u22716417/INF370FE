<div class="container">
  <h2>Ticket Sales Report</h2>
  <button (click)="exportToPDF()" class="btn btn-primary mb-3">Export to PDF</button> |
  <button (click)="exportToExcel()" class="btn btn-primary mb-3">Export to Excel</button>
    <!-- Flex container for Date Inputs and Generated Info Card -->
    <div class="d-flex justify-content-between align-items-start mb-4">
      <!-- Date Inputs -->
      <div class="card" style="width: 35%; margin-left: 0; justify-self: start;">
        <div class="card-body">
          <div class="d-flex gap-3">
            <div>
              <label for="monthSelect">Select Month:</label>
              <select id="monthSelect" class="form-control" (change)="populateDates($event)">
                <option value="">Select Month</option>
                <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
              </select>
            </div>
            <div>
              <label for="startDate">Start Date:</label>
              <input type="date" id="startDate" [(ngModel)]="startDate" (change)="filterSalesByDate()" class="form-control">
            </div>
            <div>
              <label for="endDate">End Date:</label>
              <input type="date" id="endDate" [(ngModel)]="endDate" (change)="filterSalesByDate()" class="form-control">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div  id="reportContent" >
    <!-- Generated Info Card -->
    <div class="card"  style="width: 30%; margin-left: 0; justify-self: start;">
      <div class="card-body">
        <p class="card-text ">
          <strong>Generated by:</strong> {{ reportGeneratedBy }}
        </p>
        <p class="card-text">
          <strong>Report generated on:</strong> {{ reportGeneratedDate }}
        </p>
      </div>
    </div>


  <!-- Chart Card -->
  <div  class="card mb-4">
    <div class="card-body">
      <div id="chart">
        <apx-chart 
    [series]="chartOptions.series"
    [chart]="chartOptions.chart"
    [xaxis]="chartOptions.xaxis"
    [dataLabels]="chartOptions.dataLabels"
    [title]="chartOptions.title"
    [plotOptions]="chartOptions.plotOptions"
    [colors]="chartOptions.colors"
    [fill]="chartOptions.fill">
  </apx-chart>
      </div>
    </div>


  <!-- Sales Data Table -->
  <table id="reportTable" class="table table-striped">
    <thead>
      <tr>
        <th>Event Name</th>
        <th>Event Date</th>
        <th>Ticket Price</th>
        <th>Number of Tickets Sold</th>
        <th>Total Sales (VAT incl.)</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let report of filteredSales">
        <td>{{ report.eventName }}</td>
        <td>{{ report.eventDate | date:'yyyy-MM-dd' }}</td>
        <td>R {{ report.ticketPrice | number:'1.2-2' }}</td>
        <td>{{ report.unsoldTickets }}</td>
        <td>R {{ (report.ticketPrice * report.unsoldTickets) | number:'1.2-2' }}</td> 
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="4"><strong>Total</strong></td>
        <td><strong>R {{ getTotalSales() | number:'1.2-2' }}</strong></td>
      </tr>
    </tfoot>
  </table>
  </div>
</div>
</div>

