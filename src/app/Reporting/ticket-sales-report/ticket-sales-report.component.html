<div class="container" >

      
      <!-- Logo -->
      <div class="text-center mb-4">
        <img src="https://pevents.co.za/wp-content/uploads/2020/03/Protea-logo-edited-2048x2048.png" alt="Protea Logo" class="img-fluid" style="max-width: 150px;">
      </div>

      <!-- Title -->
      <h2 class="text-center">Ticket Sales Report</h2>

      <!-- Buttons for Exporting -->
      <div >
        <button (click)="exportToPDF()" class="btn btn-primary">Export to PDF</button> |
        <button (click)="exportToExcel()" class="btn btn-primary">Export to Excel</button>
      </div>

      <!-- Flex container for Date Inputs and Generated Info Card -->
      <div class="d-flex justify-content-between align-items-start mb-4">
        <!-- Date Inputs -->
        <div class="card" style="width: 50%;">
          <div class="card-body">
            <div class="d-flex gap-3">
              <div>
                <label for="monthSelect">Select Month:</label>
                <select id="monthSelect" class="form-control" (change)="populateDates($event)">
                  <option (click)="setDefaultDates()" value="">Select Month</option>
                  <option *ngFor="let month of months" [value]="month.value">{{ month.name }}</option>
                </select>
              </div>
              <div>
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate" [(ngModel)]="startDate" (change)="filterSalesByDate()" class="form-control">
              </div>
              <div>
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate" [(ngModel)]="endDate" (change)="filterSalesByDate()" class="form-control">
              </div>
            </div>
          </div>
        </div>

        <!-- Generated Info Card -->
        <div class="card" style="width: 30%;">
          <div class="card-body">
            <p class="card-text">
              <strong>Generated by:</strong> {{ reportGeneratedBy }}
            </p>
            <p class="card-text">
              <strong>Report generated on:</strong> {{ reportGeneratedDate }}
            </p>
          </div>
        </div>
      </div>

      <!-- Chart Card -->
      <div class="card mb-4">
        <div class="card-body">
          <div id="chart" #chart>
            <apx-chart 
              [series]="chartOptions.series"
              [chart]="chartOptions.chart"
              [xaxis]="chartOptions.xaxis"
              [dataLabels]="chartOptions.dataLabels"
              [title]="chartOptions.title"
              [plotOptions]="chartOptions.plotOptions"
              [colors]="chartOptions.colors"
              [fill]="chartOptions.fill">
            </apx-chart>
          </div>
        </div>
      </div>

      <!-- Sales Data Table -->
      <div id="reportContent">
        <table id="reportTable" class="table table-striped">
          <thead>
            <tr>
              <th>Event Name</th>
              <th>Event Date</th>
              <th>Ticket Price</th>
              <th>Number of Tickets Sold</th>
              <th>Total Sales (VAT incl.)</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let report of filteredSales">
              <td>{{ report.event_name }}</td>
              <td>{{ report. eventdate | date:'yyyy-MM-dd' }}</td>
              <td>R {{ report.ticket_price | number:'1.2-2' }}</td>
              <td>{{ report.number_of_tickets_sold }}</td>
              <td>R {{ (report.ticket_price * report.number_of_tickets_sold) | number:'1.2-2' }}</td> 
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td colspan="4"><strong>Total</strong></td>
              <td><strong>R {{ getTotalSales() | number:'1.2-2' }}</strong></td>
            </tr>
          </tfoot>
        </table>


          <h1> Total Sales </h1>
        <table id="reportTable" class="table table-striped">
          <thead>
            <tr>
              <th>Product</th>
              <th>Total Quantity</th>
              <th>Total Sales (VAT Incl)</th>
            </tr>
          </thead>
          <tbody>
            <tr >
              <td>Tickets</td>
              <td>{{ getTotalQuantity()}}</td>
              <td><strong>R {{ getTotalSales() | number:'1.2-2' }}</strong></td>
              <td></td>
            </tr>
            <tr >
              <td>Services</td>
              <td>{{getTotalServiceQuantity()}}</td>
              <td>R {{getTotalServiceSales()}}</td> 
            </tr>
            <tr >
              <td></td>
              <td>Total Sales</td>
              <td>R {{getTotalServiceSales() + getTotalSales()}}</td> 
            </tr>
          </tbody>
        </table>
      </div>

    </div>

