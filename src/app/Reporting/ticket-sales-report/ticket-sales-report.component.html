<!-- ticket-sales-chart.component.html -->
<div id="reportContent" class="container">
  <h2>Ticket Sales Report</h2>
  <button (click)="exportToPDF()" class="btn btn-primary mb-3">Export to PDF</button>
  <p>Generated by: {{ reportGeneratedBy }}</p>
  <p>Report generated on: {{ reportGeneratedDate }}</p>

  <div>
    <label for="startDate">Start Date:</label>
    <input type="date" id="startDate" [(ngModel)]="startDate" (change)="filterSalesByDate()">

    <label for="endDate">End Date:</label>
    <input type="date" id="endDate" [(ngModel)]="endDate" (change)="filterSalesByDate()">
  </div>

  <div id="chart">
    <apx-chart 
      [series]="chartOptions.series" 
      [chart]="chartOptions.chart" 
      [xaxis]="chartOptions.xaxis" 
      [yaxis]="chartOptions.yaxis" 
      [title]="chartOptions.title" 
      [tooltip]="chartOptions.tooltip">
    </apx-chart>
  </div>

  <table id="reportTable" class="table table-striped">
    <thead>
      <tr>
        <th>Event Name</th>
        <th>Event Date</th>
        <th>Ticket Price</th>
        <th>Number of Tickets Sold</th>
        <th>Total Sales (VAT incl.)</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let report of filteredSales">
        <td>{{ report.eventName }}</td>
        <td>{{ report.eventDate | date:'yyyy-MM-dd' }}</td>
        <td>R {{ report.ticketPrice }}</td>
        <td>{{ report.unsoldTickets }}</td>
        <td>R {{ report.ticketPrice * report.unsoldTickets }}</td> 
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="4"><strong>Total</strong></td>
        <td><strong>R {{ getTotalSales() }}</strong></td>
      </tr>
    </tfoot>
  </table>
</div>
