<div *ngIf="isLoading">Loading...</div>
<div *ngIf="error">{{ error }}</div>
<div style="padding-top: 5%;">
    <h1>Audit Trail Manager</h1>
</div>
<br>
<!-- Filters -->
<!-- Filters -->
<div class="filters">
    <div class="filter-group">
      <label for="startDate">Start Date:</label>
      <input type="date" id="startDate" [(ngModel)]="startDate" (change)="applyFilters()" />
    </div>
  
    <div class="filter-group">
      <label for="endDate">End Date:</label>
      <input type="date" id="endDate" [(ngModel)]="endDate" (change)="applyFilters()" />
    </div>
  
    <div class="filter-group">
      <label for="actionedBy">Actioned By:</label>
      <select id="actionedBy" [(ngModel)]="selectedActionedBy" (change)="applyFilters()">
        <option *ngFor="let user of distinctUsers" [value]="user">{{ user }}</option>
        <option value="">All</option>
      </select>
    </div>
  
    <div class="filter-group">
      <label for="productType">Product Type:</label>
      <select id="productType" [(ngModel)]="selectedProduct" (change)="applyFilters()">
        <option *ngFor="let product of distinctProducts" [value]="product">{{ product }}</option>
        <option value="">All</option>
      </select>
    </div>
  
    <div class="filter-group">
      <label for="subsystem">Subsystem:</label>
      <select id="subsystem" [(ngModel)]="selectedSubsystem" (change)="applyFilters()">
        <option *ngFor="let subsystem of distinctSubsystems" [value]="subsystem">{{ subsystem }}</option>
        <option value="">All</option>
      </select>
    </div>
  </div>
  
<!-- Table -->
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Audit Log ID</th>
      <th>Actioned By</th>
      <th>Sub System</th>
      <th>Time Stamp</th>
      <th>Transaction Type</th>
      <th>Product</th>
      <th>Amount</th>
      <th>Quantity</th>
      <th>Result</th>
      <th>Table Name</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let log of filteredAuditLogs">
      <td>{{ log.auditLogId }}</td>
      <td>{{ log.actionedBy }}</td>
      <td>{{ log.subSystem }}</td>
      <td>{{ log.timeStamp }}</td>
      <td>{{ log.transactionType }}</td>
      <td>{{ log.product }}</td>
      <td>+ R {{ log.amount }}</td>
      <td>{{ log.quantity }}</td>
      <td>{{ log.result }}</td>
      <td>{{ log.tableName }}</td>
    </tr>
  </tbody>
</table>
